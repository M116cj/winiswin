# 📱 Discord 交互命令指南

## 概述
機器人現在支持在 Discord 中使用命令查詢實時資訊！

---

## 🎮 可用命令列表

### 1. `!commands`
**顯示所有可用命令**

```
!commands
```

顯示完整的命令列表和說明。

> 注意：也可以使用 Discord 內建的 `!help` 命令查看所有命令。

---

### 2. `!positions`
**查看當前持倉**

```
!positions
```

**顯示內容：**
- 持倉數量（X/3）
- 每個倉位的詳細資訊：
  - 交易對名稱（BTCUSDT, ETHUSDT 等）
  - 方向（LONG/SHORT）
  - 入場價格
  - 當前價格
  - 持倉數量
  - 止損價格
  - 止盈價格
  - 當前盈虧百分比 🟢/🔴

**範例輸出：**
```
📊 當前持倉
持倉數量: 2/3

📈 BTCUSDT
方向: LONG
入場: $50,628.78
當前: $51,200.00
數量: 0.001000
止損: $49,600.00
止盈: $52,000.00
盈虧: 🟢 1.13%

📈 ETHUSDT
方向: LONG
入場: $3,125.50
當前: $3,200.00
數量: 0.050000
止損: $3,050.00
止盈: $3,300.00
盈虧: 🟢 2.38%
```

---

### 3. `!balance`
**查看賬戶餘額和資金分配**

```
!balance
```

**顯示內容：**
- 賬戶餘額
- 總盈虧
- 投資回報率（ROI）
- 當前倉位數
- 可用倉位數
- 每倉位資金（賬戶的 1/3）

**範例輸出：**
```
💰 賬戶資訊

賬戶餘額: $10,245.50
總盈虧: $245.50
投資回報率: 2.46%

當前倉位: 2/3
可用倉位: 1
每倉位資金: $3,415.17
```

---

### 4. `!stats`
**查看詳細性能統計**

```
!stats
```

**顯示內容：**
- 總交易數
- 勝率
- 最大回撤
- 贏的交易數
- 輸的交易數
- ROI
- 風險配置詳情

**範例輸出：**
```
📊 詳細性能統計

總交易數: 45
勝率: 64.44%
最大回撤: 2.35%

贏的交易: 29
輸的交易: 16
ROI: 2.46%

風險配置:
每筆風險: 0.3%
最大倉位: 0.5%
最大同時倉位: 3
```

---

### 5. `!status`
**查看機器人運行狀態**

```
!status
```

**顯示內容：**
- 運行狀態
- 監控模式（ALL/AUTO/STATIC）
- 監控幣種數量
- 當前倉位
- 交易模式（實盤/模擬）

**範例輸出：**
```
🤖 機器人狀態

狀態: ✅ 運行中
監控模式: ALL
監控幣種數: 648

當前倉位: 2/3
交易模式: ⚠️ 模擬模式
```

---

### 6. `!config`
**查看機器人配置**

```
!config
```

**顯示內容：**
- 交易對配置（模式、數量）
- 風險管理配置（每筆風險、最大倉位等）
- 止損止盈配置（ATR 倍數）

**範例輸出：**
```
⚙️ 機器人配置

交易對配置:
模式: all
數量: 648

風險管理:
每筆風險: 0.3%
最大倉位: 0.5%
同時倉位: 3
每倉位資金: 33.33%

止損止盈:
止損 ATR 倍數: 2.0
止盈 ATR 倍數: 3.0
```

---

## 📌 使用技巧

### 快速查看倉位和餘額
```
!positions
!balance
```

### 完整性能檢查
```
!status
!stats
!balance
```

### 查看所有配置
```
!config
```

---

## 🎯 常見使用場景

### 場景 1: 每天早上檢查
```
!balance    # 查看總體情況
!positions  # 查看持倉
!stats      # 查看性能
```

### 場景 2: 交易前檢查
```
!positions  # 確認當前倉位
!balance    # 確認可用資金
```

### 場景 3: 調試或故障排查
```
!status     # 確認機器人狀態
!config     # 檢查配置
!positions  # 查看倉位
```

---

## 💡 注意事項

1. **命令前綴**: 所有命令都需要 `!` 前綴
2. **大小寫**: 命令不區分大小寫（`!help` 和 `!HELP` 相同）
3. **回應時間**: 命令會立即回應，無需等待
4. **權限**: 所有頻道成員都可以使用這些命令
5. **頻道**: 命令可以在任何機器人所在的頻道使用

---

## 🔧 技術細節

### 命令架構
- 使用 Discord.py commands 擴展
- 與 RiskManager 即時同步
- 所有數據都是實時的

### 數據來源
- 倉位資訊: RiskManager.open_positions
- 餘額資訊: RiskManager.account_balance
- 統計資訊: RiskManager.get_performance_stats()
- 配置資訊: Config 類

---

## 📊 命令輸出格式

所有命令都使用 Discord Embed 格式，提供：
- 🎨 彩色區塊
- 📊 結構化資訊
- ⏰ 時間戳
- 🎯 清晰的欄位分隔

---

## 🚀 快速開始

1. 在 Discord 輸入 `!help` 查看所有命令
2. 輸入 `!status` 確認機器人運行
3. 使用 `!positions` 和 `!balance` 查看實時狀態

**就這麼簡單！** 🎉
