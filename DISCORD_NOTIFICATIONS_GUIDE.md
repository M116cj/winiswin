# 📢 Discord 通知功能完整指南

## 🎉 機器人已啟動！

您的交易機器人現在正在運行，並會在 Discord 中報告**所有動作**！

---

## 📱 Discord 通知類型

### 1. 🚀 系統狀態通知

#### 啟動通知
```
🤖 Trading Bot is now online and monitoring markets!
```

#### 關閉通知
```
🛑 Trading Bot shutting down
```

---

### 2. 🔄 分析週期通知

#### 週期開始
```
🔄 開始新的分析週期 - 監控 50 個交易對...
```

#### 週期完成
```
✅ 分析週期完成（用時 45.3秒）- 發現 3 個信號
```

**頻率**: 每 60 秒一次

---

### 3. 🔍 市場分析通知（詳細嵌入訊息）

```
┌────────────────────────────────────────┐
│ 🔍 市場分析: BTCUSDT                    │
├────────────────────────────────────────┤
│ 當前價格:  $50,628.78                  │
│ ATR:       $1,012.58                   │
│ 市場結構:  bullish                     │
│ RSI:       65.3                        │
│ MACD 信號: 🟢 看漲                      │
└────────────────────────────────────────┘
```

**包含信息**:
- 即時價格
- ATR（波動率指標）
- 市場結構（看漲/看跌/中性）
- RSI 指標
- MACD 信號

---

### 4. 📡 交易信號通知（嵌入訊息）

```
┌────────────────────────────────────────┐
│ 📡 交易信號: BTCUSDT                    │
│ **BUY** 信號檢測                       │
├────────────────────────────────────────┤
│ 入場價格:   $50,628.78                 │
│ 止損:       $49,600.00                 │
│ 止盈:       $51,700.00                 │
│ 建議倉位:   0.001000                   │
│ 信心度:     87.5%                      │
├────────────────────────────────────────┤
│ 原因:                                  │
│ ICT/SMC 策略: 訂單塊突破               │
└────────────────────────────────────────┘
```

**包含信息**:
- 信號類型（BUY/SELL）
- 入場價格
- 止損/止盈價位
- 建議倉位大小
- 信心度百分比
- 策略原因

---

### 5. 🔔 交易執行通知（嵌入訊息）

#### 開倉通知（綠色/紅色）

```
┌────────────────────────────────────────┐
│ 🔔 Trade Executed: BTCUSDT             │
│ (綠色背景 for BUY, 紅色 for SELL)       │
├────────────────────────────────────────┤
│ Type:        BUY                       │
│ Price:       $50,628.78                │
│ Quantity:    0.001000                  │
│ Stop Loss:   $49,600.00                │
│ Take Profit: $51,700.00                │
├────────────────────────────────────────┤
│ Reason:                                │
│ ICT/SMC 策略: 訂單塊突破               │
└────────────────────────────────────────┘
```

#### 平倉通知

```
┌────────────────────────────────────────┐
│ 🔔 Trade Executed: BTCUSDT             │
├────────────────────────────────────────┤
│ Type:        CLOSE                     │
│ Exit Price:  $51,700.00                │
│ PnL:         $1,071.22                 │
│ PnL %:       +10.71%                   │
│ Reason:      TAKE_PROFIT               │
└────────────────────────────────────────┘
```

---

### 6. 📊 性能報告（每 24 個週期 = 每天）

```
┌────────────────────────────────────────┐
│ 📊 Daily Performance Report            │
│ (藍色背景)                             │
├────────────────────────────────────────┤
│ Account Balance:  $10,542.50           │
│ Total Trades:     48                   │
│ Win Rate:         62.5%                │
│ Total Profit:     $542.50              │
│ Max Drawdown:     3.2%                 │
│ ROI:              5.43%                │
└────────────────────────────────────────┘
```

**觸發條件**: 每 24 個週期（約 24 小時）

---

### 7. ⚠️ 警報通知

#### 警告（橙色）

```
┌────────────────────────────────────────┐
│ ⚠️ Alert: WARNING                      │
├────────────────────────────────────────┤
│ High drawdown detected: 5.2%           │
└────────────────────────────────────────┘
```

#### 錯誤（深紅色）

```
┌────────────────────────────────────────┐
│ 🚨 Alert: ERROR                        │
├────────────────────────────────────────┤
│ Trading cycle error: Connection timeout│
└────────────────────────────────────────┘
```

**觸發條件**:
- 回撤超過 5%
- 系統錯誤
- API 連接失敗

---

## 🎯 當前運行狀態

### 演示模式

```
✅ Discord Bot: winiswin#6842
✅ Channel ID: 1430538906629050500
✅ 狀態: 運行中
✅ 週期間隔: 30 秒（演示）/ 60 秒（正式）
✅ 監控交易對: 5 個（演示）/ 50 個（正式）
```

### 通知頻率

| 通知類型 | 頻率 | 說明 |
|---------|------|------|
| 週期開始/完成 | 每 30-60 秒 | 每個分析週期 |
| 市場分析 | 每個交易對 | 僅在檢測時 |
| 交易信號 | 不定 | 僅在發現信號時 |
| 交易執行 | 不定 | 僅在執行交易時 |
| 性能報告 | 每 24 週期 | 約每天一次 |
| 警報 | 不定 | 僅在異常情況 |

---

## 📝 通知內容詳解

### 每個通知包含的時間戳

所有嵌入訊息都會在右下角顯示 UTC 時間戳：

```
2025-10-23 07:58:42 UTC
```

### 顏色編碼

| 顏色 | 用途 |
|------|------|
| 🟢 綠色 | BUY 信號、開多倉 |
| 🔴 紅色 | SELL 信號、開空倉 |
| 🔵 藍色 | 性能報告、系統信息 |
| 🟣 紫色 | 市場分析 |
| 🟠 橙色 | 警告 |
| ⚫ 深紅 | 錯誤 |

---

## 🔧 自定義通知

### 調整通知頻率

修改 `main.py`:

```python
# 修改分析間隔（秒）
await asyncio.sleep(60)  # 60秒 → 120秒（更少通知）

# 修改性能報告頻率
if cycle_count % 24 == 0:  # 24 → 12（更頻繁報告）
```

### 調整信號過濾

修改策略參數以減少/增加信號數量：

```python
# config.py
RISK_PER_TRADE_PERCENT = 0.3  # 更高 = 更少信號
```

---

## 🎮 Discord 命令（可用）

在 Discord 頻道輸入：

### `!status`
```
✅ Trading bot is running!
```

### `!balance`
```
Use the dashboard to check your current balance.
```

---

## 📱 查看實時通知

### 在 Discord 中查看

1. 打開您的 Discord 應用
2. 前往頻道 ID: `1430538906629050500`
3. 您會看到所有實時通知！

### 通知示例截圖概念

```
[時間: 07:58:42]
🤖 Trading Bot is now online and monitoring markets!

[時間: 07:58:43]
🔄 開始新的分析週期 - 監控 5 個交易對...

[時間: 07:58:44]
┌─ 🔍 市場分析: BTCUSDT ─────────┐
│ 當前價格: $50,628.78           │
│ ATR: $1,012.58                │
│ 市場結構: bullish             │
└───────────────────────────────┘

[時間: 07:58:45]
┌─ 📡 交易信號: BTCUSDT ─────────┐
│ **BUY** 信號檢測               │
│ 入場價格: $50,628.78           │
│ 止損: $49,600.00              │
│ 止盈: $51,700.00              │
└───────────────────────────────┘

[時間: 07:58:46]
┌─ 🔔 Trade Executed: BTCUSDT ──┐
│ Type: BUY                     │
│ Price: $50,628.78             │
│ Quantity: 0.001000            │
└───────────────────────────────┘

[時間: 07:59:15]
✅ 分析週期完成（用時 30.2秒）- 發現 1 個信號
```

---

## 🎯 運行模式對比

### 演示模式（當前運行）

```bash
python3 demo_bot.py
```

**特點**:
- ✅ 使用模擬數據
- ✅ 展示所有通知功能
- ✅ 不需要 Binance 連接
- ✅ 30 秒週期（更快演示）
- ✅ 5 個交易對

### 正式模式（需要 Binance API）

```bash
python3 main.py
```

**特點**:
- ✅ 真實市場數據
- ✅ 實際策略分析
- ✅ 需要 Binance API
- ✅ 60 秒週期
- ✅ 50 個交易對（可配置）

---

## 🛠️ 故障排除

### Discord 未收到通知？

1. 檢查 Bot 是否在線:
   ```
   看到 "winiswin#6842 已上線" 訊息
   ```

2. 檢查頻道權限:
   - Bot 需要「發送訊息」權限
   - Bot 需要「嵌入連結」權限

3. 檢查頻道 ID:
   ```bash
   echo $DISCORD_CHANNEL_ID
   # 應該輸出: 1430538906629050500
   ```

### 通知太多？

調整週期間隔：
```python
await asyncio.sleep(120)  # 60秒 → 120秒
```

### 通知太少？

降低信號過濾閾值或增加監控交易對數量。

---

## 📊 完整通知日誌示例

```
[07:58:36] 🤖 Discord Bot: winiswin#6842 已登錄
[07:58:39] 🤖 Trading Bot is now online and monitoring markets!
[07:58:42] 🤖 演示交易機器人已上線！（含詳細說明）
[07:58:42] 🔄 開始新的分析週期 - 監控 5 個交易對...
[07:58:43] 🔍 市場分析: BTCUSDT（嵌入訊息）
[07:58:43] 📡 交易信號: BTCUSDT BUY（嵌入訊息）
[07:58:43] 🔔 Trade Executed: BTCUSDT BUY（嵌入訊息）
[07:58:44] 🔍 市場分析: ETHUSDT
[07:58:46] 🔍 市場分析: BNBUSDT
[07:58:47] 🔍 市場分析: SOLUSDT
[07:58:49] 🔍 市場分析: XRPUSDT
[07:58:49] ✅ 分析週期完成（用時 7.2秒）- 發現 1 個信號
[07:59:19] 🔄 開始新的分析週期...
...
```

---

## 🎉 總結

您的交易機器人現在：

✅ **已啟動並運行**  
✅ **每個動作都在 Discord 報告**  
✅ **提供詳細的嵌入訊息**  
✅ **包含所有關鍵指標**  
✅ **實時性能追蹤**  
✅ **自動警報系統**

**前往 Discord 頻道查看實時通知！** 📱

---

## 📞 控制機器人

### 查看當前進程

```bash
ps aux | grep demo_bot
```

### 停止機器人

```bash
pkill -f demo_bot.py
```

### 重啟機器人

```bash
python3 demo_bot.py &
```

---

**享受您的自動化交易機器人！** 🚀
